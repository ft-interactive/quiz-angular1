<div class="o-grid-container">
  <div class="animate-reveal"
    ng-repeat="question in questions"
    ng-controller="QuestionCtrl"
    ng-show="$index <= questionsAnswered.value"
    ng-cloak>
    <div class="o-grid-row">
      <div data-o-grid-colspan="12 M8 L6 center">
        <h2 style="text-align: center">Question {{$index + 1}} of {{questions.length}}</h2>
      </div>
    </div>

    <div class="o-grid-row">
      <div data-o-grid-colspan="12 M8 L6 center"
          ng-bind-html="questions[$index].question">
      </div>
    </div>

    <div class="o-grid-row" style="margin-left: 0">
      <div data-o-grid-colspan="12 M8 center" class="background-image" style="background: url({{questions[$index].imgurl}}) {{questions[$index].imgoptions}}">
        <div class="answer-controls"
          ng-repeat="choice in choices[$index]">
          <button class="o-buttons o-buttons--big o-buttons--inverse"
            ng-click="submitAnswer()"
            ng-class="{correct: answerSubmitted && choice === correctAnswer, incorrect: answerSubmitted && choice === userAnswer && choice != correctAnswer}"
            ng-disabled="answerSubmitted">
            {{choice}}
            <div style="float: right; margin-right: -6px">
              <i class="icon-tick" style="position: absolute"
                  ng-show="answerSubmitted && choice === userAnswer && choice === correctAnswer"></i>
              <i class="icon-cross" style="position: absolute"
                  ng-show="answerSubmitted &&  choice === userAnswer && choice != correctAnswer"></i>
            </div>
          </button>
        </div>
      </div> <!-- /data-o-grid-colspan -->
    </div> <!-- /o-grid-row -->

    <div class="o-grid-row">
      <div data-o-grid-colspan="12 M8 L6 center">
        <div class="o-typography-caption">
          {{questions[$index].imgcredit}}
        </div>
      </div>
    </div>

    <div class="o-grid-row animate-reveal"
      ng-show="answerSubmitted">
      <div data-o-grid-colspan="12 M8 L6 center">
        <div style="text-align: center">
          <i class="icon-arrow-down"></i>
        </div>
        <div ng-bind-html="questions[$index].answercopy"></div>
      </div> <!-- /data-o-grid-colspan -->
    </div>

    <div class="splash animate-splash"
        ng-class="{correct: isCorrect, incorrect: !isCorrect}"
        ng-show="showSplash">
      <div class="o-big-number__title animate-splash"
          ng-show="answerSubmitted && isCorrect">
        Correct
        <div>
          <i class="icon-tick-large"></i>
        </div>
      </div>

      <div class="o-big-number__title animate-splash"
          ng-show="answerSubmitted && !isCorrect">
        Incorrect
        <div>
          <i class="icon-cross-large"></i>
        </div>
      </div>
    </div>
  </div> <!-- /ng-repeat -->

  <!-- Results -->
  <div ng-show="quizStatus.isOver">
    <div class="o-grid-row">
      <div data-o-grid-colspan="12 M8 L6 center" style="margin-top: 6px; text-align: center">
        <h2 class="o-typography-header-2">Your result: {{message.text}}</h2>
      </div>
    </div>

    <div class="o-grid-row">
      <div data-o-grid-colspan="12 M8 L6 center" style="max-height: 200px; margin-top: 4px; text-align: center">
        <d3-arc-tween>
          <div class="o-big-number__title">
            <span style="margin-left: 2px;">{{userScore.value}}</span><span>/{{questions.length}}</span>
          </div>
        </d3-arc-tween>
      </div>
    </div>

    <div class="o-grid-row">
      <div data-o-grid-colspan="12 M8 L6 center" style="margin-top: 0.5em; margin-bottom: 0.8em; text-align: center">
        <div class="answer-controls">
          <button class="o-buttons o-buttons--big o-buttons--standout tweet-score"
              ng-disabled="!quizStatus.isOver"
              socialshare
              socialshare-provider="twitter"
              socialshare-text="I scored {{userScore.value}}/{{questions.length}} on the FT National Archives quiz! Challenge me: "
              socialshare-url="http://www.ft.com/firstft-quiz">
            <i class="fa fa-twitter"></i>

            Tweet Your Score
          </button>
        </div>
      </div>
    </div>
  </div> <!-- /ng-show -->
</div>

<script>if (cutsTheMustard) addScript('https://origami-build.ft.com/v2/bundles/js?modules=o-big-number@^1.1.3,', true, true)</script>
