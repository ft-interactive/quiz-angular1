<div class="o-grid-container">
  <div ng-repeat="question in questions">
    <div class="animate-reveal"
      ng-controller="QuestionCtrl"
      ng-show="$index <= questionsAnswered.value"
      ng-cloak>
      <div class="o-grid-row">
        <div data-o-grid-colspan="12 M8 L6 center">
          <h2 style="text-align: center">Question {{$index + 1}} of {{questions.length}}</h2>
        </div>
      </div>

      <div class="o-grid-row">
        <div data-o-grid-colspan="12 M8 center">
          <div class="o-grid-row">
            <div data-o-grid-colspan="12 L6" class="quiz-image">
              <img alt="" src="{{questions[$index].imgurl}}" style="width: 100%">

              <div class="o-typography-caption">
                {{questions[$index].imgcredit}}
              </div>
            </div>

            <div data-o-grid-colspan="12 L6">
              <h3 class="o-typography-header3" ng-bind-html="questions[$index].question"></h3>

              <div class="answer-controls"
                ng-repeat="choice in choices[$index]">
                <button class="o-buttons o-buttons--big o-buttons--standout"
                  ng-click="submitAnswer()"
                  ng-class="{
                    correct: answerSubmitted && choice === correctAnswer,
                    incorrect: answerSubmitted && choice === userAnswer && choice != correctAnswer}"
                  ng-disabled="answerSubmitted">
                  {{choice}}
                </button>
              </div>
            </div> <!-- /data-o-grid-colspan -->
          </div> <!-- /o-grid-row -->
        </div> <!-- /data-o-grid-colspan -->
      </div> <!-- /o-grid-row -->

      <div class="o-grid-row animate-reveal"
        ng-show="answerSubmitted">
        <div data-o-grid-colspan="12 M8 L6 center">
          <p>
            {{questions[$index].answercopy}}
          </p>

          <div data-o-component="o-aside-panel" class="o-aside-panel">
            <div class="o-aside-panel__header">
              <h3 class="o-aside-panel__heading">More on this story</h3>
            </div>

            <div class="o-aside-panel__body">
              <a href="{{questions[$index].linkurl}}" target="_blank">{{questions[$index].linktext}}</a>
            </div>
          </div>
        </div> <!-- /data-o-grid-colspan -->
      </div>

      <div class="splash animate-splash"
        ng-class="{correct: isRemain, incorrect: !isRemain}"
        ng-show="showSplash">
        <div class="o-big-number__title animate-splash"
          ng-show="answerSubmitted && isRemain">
          Remain!
        </div>

        <div class="o-big-number__title animate-splash"
          ng-show="answerSubmitted && !isRemain">
          Leave!
        </div>
      </div>
    </div> <!-- /ng-controller -->
  </div> <!-- /ng-repeat -->

  <!-- Results -->
  <div ng-show="quizStatus.isOver">
    <div class="o-grid-row">
      <div data-o-grid-colspan="12 M8 L6 center">
        <div class="o-big-number__title" style="width: 140px; margin-right: auto; margin-left: auto">
          <div style="display: inline; float: left; width: 96px; text-align: right"
            ng-show="remainPercentage.value > 0"
            inc-dec-counter value="{{remainPercentage.value}}" interval="5">
          </div>

          <div style="display: inline; float: left; width: 96px; text-align: right"
            ng-show="remainPercentage.value < 0"
            inc-dec-counter value="{{leavePercentage.value}}" interval="5">
          </div>

          <div style="display: inline; text-align: left">
            &#37;
          </div>
        </div>


        <div class="o-big-number__content">
          {{message.text}}
        </div>
      </div>
    </div>

    <div class="o-grid-row">
      <div data-o-grid-colspan="12 M8 L6 center" style="margin-top: 0.5em; margin-bottom: 0.8em; text-align: center">
        <div class="answer-controls">
          <button class="o-buttons o-buttons--big o-buttons--standout"
            ng-disabled="!quizStatus.isOver"
            socialshare
            socialshare-provider="twitter"
            socialshare-text="I just scored {{userScore.value}}/{{questions.length}} on the #FirstFT quiz! Challenge me: "
            socialshare-url="https://ig.ft.com/sites/quiz/firstft-2016-05-27/">
            <i class="fa fa-twitter"></i>

            Tweet Your Score
          </button>
        </div>
      </div>
    </div>

    <div class="o-grid-row">
      <div data-o-grid-colspan="12 M8 L6 center">
        <div data-o-component="o-aside-panel" class="o-aside-panel" style="margin-top: 4px">
          <div class="o-aside-panel__header">
            <h3 class="o-aside-panel__heading">Featured in this quiz</h3>
          </div>

          <div class="o-aside-panel__body">
            <ol style="font-size: 16px; font-weight: 400">
              <li ng-repeat="question in questions">
                <a href="{{question.linkurl}}" target="_blank">{{question.linktext}}</a>
              </li>
            </ol>
          </div>
        </div>
      </div>
    </div>
  </div> <!-- /ng-show -->
</div>

<script>if (cutsTheMustard) addScript('https://origami-build.ft.com/v2/bundles/js?modules=o-big-number@^1.1.3', true, true)</script>
